cmake_minimum_required(VERSION 3.0)
project(FTSFC)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++14 -lpthread -O2")

set(PYTHON_FILES sig-conf/clickgen.py)

include_directories(
        ${PROTOBUF_INC}
)

add_executable(FTSFC
        atomic_array.cc
        atomic_array.hh
        buffer.hh
        buffer.cc
        decoder.cc
        decoder.hh
        defs.cc
        defs.hh
        forwarder.cc
        forwarder.hh
        ftmb_sim.cc
        ftmb_sim.hh
        lock_free_array.cc
        lock_free_array.hh
        old/nf_atomic_counter.cc
        old/nf_atomic_counter.hh
        old/nf_atomic_nat.cc
        old/nf_atomic_nat.hh
        nf_lock_free_counter.cc
        nf_lock_free_counter.hh
        shared_lock_free_state.cc
        shared_lock_free_state.hh
        ft_lock_free_counter.cc
        ft_lock_free_counter.hh
        pm_process.cc
        pm_process.hh
        pm_construct.cc
        pm_construct.hh
        stats_collector.cc
        stats_collector.hh
        client.cc
        client.hh
        transmitter.cc
        transmitter.hh
        tf_lock_free_counter.cc
        tf_lock_free_counter.hh
        ft_nat.cc
        ft_nat.hh
        ft_monitor.cc
        ft_monitor.hh
        nf_monitor.cc
        nf_monitor.hh
        nf_nat.cc
        nf_nat.hh
        tf_monitor.cc
        tf_monitor.hh
        tf_nat.cc
        tf_nat.hh
        not-worked-ideas/ft/buffer.cc beamermux.cc beamermux.hh freebsdbob.hh fivetuple.hh statetrack.hh dipmap.hh checksumfixup.hh p4crc32.hh rewriterbase.hh rewriterbase.cc rwmapping.hh rwmapping.cc rwpattern.hh rwpattern.cc rwpatterns.hh rwpatterns.cc addrrewriter.hh addrrewriter.cc lock_manager.hh shared_locks.cc shared_locks.hh)

target_link_libraries(FTSFC ${PROTOBUF_LIB})

