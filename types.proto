syntax = "proto2";

package FTSFC;

message State {
    repeated string key = 1;
    repeated string val = 2;
}

message TimestampState {
    required int64 timestamp = 1;
    optional State state     = 2;
}

message PiggyBackState {
    required int32  ack         = 1;
    required int64  last_commit = 2;
    required int64  timestamp   = 3;
    optional State  state       = 4;
}

message PiggyBackMessage {
    repeated int32          mb_id    = 1;
    repeated PiggyBackState pb_state = 2;
}